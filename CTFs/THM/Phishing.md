Task 1 - Brief
---------------------

This room will discuss phishing, how it is done and some valuable tools. This is an essential part of any Red Team enagement.

__Questions__

I am ready to learn!
Answer: _None Needed_


Task 2 - Intro To Phishing Attacks
----------------------------------------------------

Phishing is a form of Social Engineering, whereby some type of psychological  manipulation is performed on a person or group to exploit some weakness in their human nature  and get them to act in a way we desire. These "weaknesses" can be curiosity, jealously, greed and even kindness and the willingness to help someone. Phishing is a source of social engineering delivered through email to trick someone into either revealing personal information, credentials or even executing malicious code on their computer.

These emails _appear_ to come from trusted sources and entice the user to click on a link or open an attachment in order to run some software on their computer unwittingly. 

One of the more popular forms of this recently is _spear-phishing_, and as you can imagine it is like aiming a spear at a target and throwing it. It is a much more targeted form of phishing. This type of attack is more direct and usually has some details about the user that it is intended for, so it is much less likely to be caught by spam filters, anitvirus and firewalls.

A Red Team assignment maybe solely to carry out a Phishing campaign to determine how vulnerable a business is to this type of attack, and/or train employees on what to look for and what to do in case of a real phishing attack.

Another form of phishing through SMS is called Smishing. 

**Example Scenario:**

The below example shows how an employee could be tricked into revealing their credentials.

1. Attacker locates the physical location of the target business.
2. Attacker then looks for nearby food suppliers and discovers a company called Ultimate Cookies!
3. The Attacker registers the domain name ultimate-cookies.thm
4. The Attacker then crafts and email to their target, tempting then with an offer of receiving some free cookies if they sign up for the website.  Because the victim has heard of this company, they are more likely to trust it.
5. The Victim then follows the link in the email to the fake website created by the attacker and registers online. To keep things simple, the victim reuses the same password for all their online accounts.
6. The Attacker now has the victim's email address and password and can log onto the victim's company email account. The attacker could now have access to the private company information and also have somewhere to launch another phishing attack against other employees.

__Questions__

What type of psychological manipulation is phishing part of?
Answer: _Social Engineering_

What type of phishing campaign do red teams get involved in?
Answer: _spear-phishing_


Task 3 - Writing Convincing Phishing Emails
----------------------------------------------------------------------

We basically have 3 things to work with. Sender's Email Address, Subject and Content.

### The Sender's Address:
Ideally, we want our Sender's email to look legitimate, so spoofing a popular site/brand, a known contact or coworker is best.

To find out what types of people that a victim interacts with, you can use some OSINT techniques to do some digging. For Example:

-   Observe their social media account for any brands or friends they talk to.
-   Searching Google for the victim's name and rough location for any reviews the victim may have left about local businesses or brands.
-   Looking at the victim's business website to find suppliers.
-   Looking at LinkedIn to find coworkers of the victim.

### The Subject:
The subject should be something that piques the victim's interests, so they can't ignore it and something they should act on quickly.

Examples:
1.  Your account has been compromised.
2.  Your package has been dispatched/shipped.
3.  Staff payroll information (do not forward!)
4.  Your photos have been published.

### The Content:
If impersonating a brand or supplier, it would be pertinent to research their standard email templates and branding (style, logo's images, signoffs etc.) and make your content look the same as theirs, so the victim doesn't expect anything.

When impersonating people it is very helpful to contact them first, to see what mannerisms they use and see if they have a certain email template or signature that we can copy to make the mail seem legit.  

Remember that all of the finishing details we can add, increase the chances of our psychological operation working.

If we use a spoof website, the links should be disgused as much as possible. You should use anchor text and change the title. Some examples are:

`<a href="http://spoofsite.thm">Click Here</a>`

`<a href="http://spoofsite.thm">https://onlinebank.thm</a>`


__Questions__

What tactic can be used to find brands or people a victim interacts with?
Answer: _OSINT_

What should be changed on an HTML anchor tag to disguise a link?
Answer: _anchor text_


Task 4 - Phishing Infrastructure
----------------------------------------------------

A certain amount of infrastructure will need to be put in place to launch a successful phishing campaign.

  

**Domain Name:**

You'll need to register either an authentic-looking domain name or one that mimics the identity of another domain. See task 5 for details on how to create the perfect domain name.

  

**SSL/TLS Certificates:**

Creating SSL/TLS certificates for your chosen domain name will add an extra layer of authenticity to the attack.

  

**Email Server/Account:**

You'll need to either set up an email server or register with an SMTP email provider. 

  

**DNS Records:**

Setting up DNS Records such as SPF, DKIM, DMARC will improve the deliverability of your emails and make sure they're getting into the inbox rather than the spam folder.

  

**Web Server:**

You'll need to set up webservers or purchase web hosting from a company to host your phishing websites. Adding SSL/TLS to the websites will give them an extra layer of authenticity. 

  

**Analytics:**

When a phishing campaign is part of a red team engagement, keeping analytics information is more important. You'll need something to keep track of the emails that have been sent, opened or clicked. You'll also need to combine it with information from your phishing websites for which users have supplied personal information or downloaded software. 

**Automation And Useful Software:**

Some of the above infrastructures can be quickly automated by using the below tools.

  

**GoPhish - (Open-Source Phishing Framework) - [getgophish.com](https://getgophish.com/)  
**

GoPhish is a web-based framework to make setting up phishing campaigns more straightforward. GoPhish allows you to store your SMTP server settings for sending emails, has a web-based tool for creating email templates using a simple WYSIWYG (What You See Is What You Get) editor. You can also schedule when emails are sent and have an analytics dashboard that shows how many emails have been sent, opened or clicked.

  

The Next task will talk you through how to launch a phishing campaign using this software.  

  

**SET - (Social Engineering Toolkit) - [trustedsec.com](https://www.trustedsec.com/tools/the-social-engineer-toolkit-set/)  
**

The Social Engineering Toolkit contains a multitude of tools, but some of the important ones for phishing are the ability to create spear-phishing attacks and deploy fake versions of common websites to trick victims into entering their credentials.

![[phishing-1.png]]

__Questions__

What part of a red team infrastructure can make a website look more authentic?
Answer: _SSL/TLS Certificates_

What protocol has TXT records that can improve email deliverability?
Answer: _DNS_

What tool can automate a phishing campaign and include analytics?
Answer: _GoPhish_


Task 5 - Using GoPhish
-------------------------------------




