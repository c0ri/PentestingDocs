Task 1 - Introduction
------------------------------------

A firewall is software or hardware that monitors the network traffic and compares it against a set of rules before passing or blocking it. One simple analogy is a guard or gatekeeper at the entrance of an event. This gatekeeper can check the ID of individuals against a set of rules before letting them enter (or leave).

Before we go into more details about firewalls, it is helpful to remember the contents of an IP packet and TCP segment. The following figure shows the fields we expect to find in an IP header. If the figure below looks complicated, you don’t need to worry as we are only interested in a few fields. Different types of firewalls are capable of inspecting various packet fields; however, the most basic firewall should be able to inspect at least the following fields:

-   Protocol
-   Source Address
-   Destination Address

![[redteamfirewalls-1.png]]

Depending on the protocol field, the data in the IP datagram can be one of many options. Three common protocols are:

-   TCP
-   UDP
-   ICMP

In the case of TCP or UDP, the firewall should at least be able to check the TCP and UDP headers for:

-   Source Port Number
-   Destination Port Number

The TCP header is shown in the figure below. We notice that there are many fields that the firewall might or might not be able to analyze; however, even the most limited of firewalls should give the firewall administrator control over allowed or blocked source and destination port numbers.

![[redteamfirewalls-2.png]]

### Learning Objectives

This room covers:

1.  The different types of firewalls, according to different classification criteria
2.  Various techniques to evade firewalls

This room requires the user to have basic knowledge of:

-   ISO/OSI layers and TCP/IP layers. We suggest going through the [Network Fundamentals](https://tryhackme.com/module/network-fundamentals) module if you want to refresh your knowledge.
-   Network and port scanning. We suggest you complete the [Nmap](https://tryhackme.com/module/nmap) module to learn more about this topic.
-   Reverse and bind shells. We recommend the [What the Shell?](https://tryhackme.com/room/introtoshells) room to learn more about shells.

__Questions__

  
The design logic of traditional firewalls is that a port number would identify the service and the protocol. For instance, visit [Service Name and Transport Protocol Port Number Registry](http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml) to answer the following questions.

If you want to block telnet, which TCP port number would you deny?
Answer: _23_

You want to allow HTTPS, which TCP port number do you need to permit?
Answer: _443_

What is an alternate TCP port number used for HTTP? It is described as “HTTP Alternate.”
Answer: _8080_

You need to allow SNMP over SSH, snmpssh. Which port should be permitted?

You can find this here:
https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.txt
```bash
snmpssh            5161        tcp    SNMP over SSH Transport                                                                                                                                                [RFC5592]
                                      Model
                   5161        udp    Reserved
```
Answer: _5161_

